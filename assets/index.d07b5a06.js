const _e=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};_e();function R(){}function ce(e){return e()}function ie(){return Object.create(null)}function A(e){e.forEach(ce)}function ye(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let K;function ve(e,t){return K||(K=document.createElement("a")),K.href=t,e===K.href}function ke(e){return Object.keys(e).length===0}function v(e,t){e.appendChild(t)}function E(e,t,n){e.insertBefore(t,n||null)}function T(e){e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function Z(e){return document.createTextNode(e)}function O(){return Z(" ")}function F(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Se(e){return Array.from(e.childNodes)}function se(e,t){e.value=t==null?"":t}function Q(e,t,n){e.classList[n?"add":"remove"](t)}function je(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let G;function X(e){G=e}function fe(){if(!G)throw new Error("Function called outside component initialization");return G}function we(e){fe().$$.on_mount.push(e)}function Te(){const e=fe();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=je(t,n,{cancelable:r});return i.slice().forEach(c=>{c.call(e,o)}),!o.defaultPrevented}return!0}}const H=[],I=[],$=[],ne=[],xe=Promise.resolve();let re=!1;function Ce(){re||(re=!0,xe.then(de))}function oe(e){$.push(e)}function q(e){ne.push(e)}const te=new Set;let V=0;function de(){const e=G;do{for(;V<H.length;){const t=H[V];V++,X(t),Ee(t.$$)}for(X(null),H.length=0,V=0;I.length;)I.pop()();for(let t=0;t<$.length;t+=1){const n=$[t];te.has(n)||(te.add(n),n())}$.length=0}while(H.length);for(;ne.length;)ne.pop()();re=!1,te.clear(),X(e)}function Ee(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}const ee=new Set;let Pe;function pe(e,t){e&&e.i&&(ee.delete(e),e.i(t))}function Le(e,t,n,r){if(e&&e.o){if(ee.has(e))return;ee.add(e),Pe.c.push(()=>{ee.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function D(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Re(e){e&&e.c()}function me(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:c,after_update:l}=e.$$;i&&i.m(t,n),r||oe(()=>{const f=o.map(ce).filter(ye);c?c.push(...f):A(f),e.$$.on_mount=[]}),l.forEach(oe)}function he(e,t){const n=e.$$;n.fragment!==null&&(A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Me(e,t){e.$$.dirty[0]===-1&&(H.push(e),Ce(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ge(e,t,n,r,i,o,c,l=[-1]){const f=G;X(e);const u=e.$$={fragment:null,ctx:null,props:o,update:R,not_equal:i,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:ie(),dirty:l,skip_bound:!1,root:t.target||f.$$.root};c&&c(u.root);let b=!1;if(u.ctx=n?n(e,t.props||{},(p,k,...x)=>{const d=x.length?x[0]:k;return u.ctx&&i(u.ctx[p],u.ctx[p]=d)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](d),b&&Me(e,p)),k}):[],u.update(),b=!0,A(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const p=Se(t.target);u.fragment&&u.fragment.l(p),p.forEach(T)}else u.fragment&&u.fragment.c();t.intro&&pe(e.$$.fragment),me(e,t.target,t.anchor,t.customElement),de()}X(f)}class be{$destroy(){he(this,1),this.$destroy=R}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!ke(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ze(e){let t,n,r,i;return{c(){t=h("div"),n=h("div"),r=h("iframe"),m(r,"title",""),m(r,"scrolling","no"),m(r,"width","482"),m(r,"height","406"),ve(r.src,i="about:blank")||m(r,"src",i),m(r,"class","svelte-19fn9ge"),Q(r,"fill-screen",["fullscreen","editor","fullscreen-editor"].includes(e[0])),m(n,"id","scratch-gui"),m(n,"class","svelte-19fn9ge"),Q(n,"show",e[1]==="ok")},m(o,c){E(o,t,c),v(t,n),v(n,r),e[10](r)},p(o,[c]){c&1&&Q(r,"fill-screen",["fullscreen","editor","fullscreen-editor"].includes(o[0])),c&2&&Q(n,"show",o[1]==="ok")},i:R,o:R,d(o){o&&T(t),e[10](null)}}}function Ie(e,t,n){let{id:r=0}=t,{editor:i=!1}=t,{params:o={}}=t,{serverUrl:c}=t,{projectStatus:l="notloaded"}=t,{reduxTarget:f=null}=t,{reduxStore:u=null}=t,{playerMode:b="player"}=t,{projectTitle:p=""}=t,k=!1;if(!c)throw new Error("The server URL must be defined!");const x=Te();let d,S,C,_,N;we(async()=>{C=c,_=`${C}/projects`,N=`${C}/assets`,await w(),S=d.contentWindow,d.addEventListener("load",async()=>{const s=async function(){n(4,f=S.ReduxTarget),n(5,u=S.ReduxStore);const M=u,z=f;y(480,360);const L=M.getState().scratchGui;L.customStageSize&&L.customStageSize.width&&L.customStageSize.height&&y(L.customStageSize.width,L.customStageSize.height),L.mode&&j(L.mode),L.projectTitle&&n(3,p=L.projectTitle),z.addEventListener("statechanged",B=>{const Y=B.detail.action;switch(x("reduxevent",B.detail),console.log(B.detail),Y.type){case"tw/custom-stage-size/SET":console.log("gui frame:",d),y(Y.width,Y.height),x("stagesize",{width:Y.width,action:d.height});break;case"scratch-gui/mode/SET_FULL_SCREEN":case"scratch-gui/mode/SET_PLAYER":j(B.detail.next.scratchGui.mode);break;case"projectTitle/SET_PROJECT_TITLE":k=!0,n(3,p=Y.title);break}})};S.addEventListener("reduxtargetadded",s),S.ReduxTarget&&s()})});async function U(s){if(k){k=!1;return}!S||(await w(s),S.location.hash="#"+r)}function W(s){if(k){k=!1;return}!u||u.dispatch({type:"projectTitle/SET_PROJECT_TITLE",title:s})}function g(s){if(k){k=!1;return}!u||(u.dispatch({type:"scratch-gui/mode/SET_PLAYER",isPlayerOnly:s==="player"||s==="fullscreen"||s==="fullscreen-editor"}),u.dispatch({type:"scratch-gui/mode/SET_FULL_SCREEN",isFullScreen:s==="fullscreen"||s==="fullscreen-editor"}))}function j(s){k=!0,n(0,b=s?s.isPlayerOnly?s.isFullScreen?"fullscreen":"player":s.isFullScreen?"fullscreen-editor":"editor":"player")}async function w(s=r){if(n(1,l="loading"),s===0)return n(1,l="notloaded"),a(!1),!1;if(Number(s))try{return(await fetch(`${_}/${s}/exists`)).ok?(n(1,l="ok"),a(!0),S&&(S.location.hash="#"+s),!0):(n(1,l="noproject"),a(!1),!1)}catch{try{if((await fetch(`${C}`)).ok)return n(1,l="projectunavailable"),a(!1),!1}catch(z){return console.log(z),n(1,l="unavailable"),a(!1),!1}}else return a(!1),!1;return n(1,l="unavailable"),a(!1),!1}function y(s,M){d.setAttribute("width",Math.max(s+2,482)),d.setAttribute("height",M+2+44),x("framesize",{width:d.width,height:d.height})}function a(s){if(s){if(d.src==="about:blank"){const M=new URLSearchParams;M.set("project_host",_),M.set("asset_host",N);for(const L in o)M.set(L,o[L]);let z=M.toString();z=z===""?"":"?"+z,n(2,d.src="/gui/"+(i?"editor.html":"index.html")+z+"#"+r,d)}S&&(S.location.hash="#"+r)}else n(2,d.src="about:blank",d)}function P(s){I[s?"unshift":"push"](()=>{d=s,n(2,d)})}return e.$$set=s=>{"id"in s&&n(6,r=s.id),"editor"in s&&n(7,i=s.editor),"params"in s&&n(8,o=s.params),"serverUrl"in s&&n(9,c=s.serverUrl),"projectStatus"in s&&n(1,l=s.projectStatus),"reduxTarget"in s&&n(4,f=s.reduxTarget),"reduxStore"in s&&n(5,u=s.reduxStore),"playerMode"in s&&n(0,b=s.playerMode),"projectTitle"in s&&n(3,p=s.projectTitle)},e.$$.update=()=>{e.$$.dirty&1&&g(b),e.$$.dirty&8&&W(p),e.$$.dirty&64&&U(r)},[b,l,d,p,f,u,r,i,o,c,P]}class Ne extends be{constructor(t){super(),ge(this,t,Ie,ze,ue,{id:6,editor:7,params:8,serverUrl:9,projectStatus:1,reduxTarget:4,reduxStore:5,playerMode:0,projectTitle:3})}}function Oe(e){let t,n,r,i,o,c,l,f,u;return{c(){t=h("div"),n=h("div"),r=h("button"),r.textContent="Create",i=O(),o=h("input"),c=O(),l=h("button"),l.textContent="See inside",m(r,"class","svelte-1kpgcbn"),m(o,"class","title-input svelte-1kpgcbn"),m(o,"type","text"),m(o,"placeholder","Project title here"),m(l,"class","svelte-1kpgcbn"),m(n,"class","controls svelte-1kpgcbn"),m(t,"class","controls-container svelte-1kpgcbn")},m(b,p){E(b,t,p),v(t,n),v(n,r),v(n,i),v(n,o),se(o,e[0]),v(n,c),v(n,l),f||(u=[F(r,"click",e[6]),F(o,"input",e[7]),F(l,"click",e[8])],f=!0)},p(b,p){p&1&&o.value!==b[0]&&se(o,b[0])},d(b){b&&T(t),f=!1,A(u)}}}function Fe(e){let t;return{c(){t=h("p"),t.textContent="Loading..."},m(n,r){E(n,t,r)},p:R,d(n){n&&T(t)}}}function Ae(e){let t;return{c(){t=h("p"),t.textContent="Somehow, we couldn't reach the project API but the servers work. What?"},m(n,r){E(n,t,r)},p:R,d(n){n&&T(t)}}}function Ue(e){let t;return{c(){t=h("p"),t.textContent="The project you tried to load doesn't exist."},m(n,r){E(n,t,r)},p:R,d(n){n&&T(t)}}}function Ye(e){let t,n,r,i,o;return{c(){t=h("p"),n=Z("Couldn't reach servers. They are probably down or the browser is blocking the requests. Try visiting "),r=h("a"),i=Z(J),o=Z(" in your browser and allowing the page to load."),m(r,"href",J)},m(c,l){E(c,t,l),v(t,n),v(t,r),v(r,i),v(t,o)},p:R,d(c){c&&T(t)}}}function qe(e){let t;return{c(){t=h("p"),t.textContent="Invalid project ID!"},m(n,r){E(n,t,r)},p:R,d(n){n&&T(t)}}}function De(e){let t;return{c(){t=h("p"),t.textContent="Creating project..."},m(n,r){E(n,t,r)},p:R,d(n){n&&T(t)}}}function He(e){let t;return{c(){t=h("p"),t.textContent="Load a project ID!"},m(n,r){E(n,t,r)},p:R,d(n){n&&T(t)}}}function ae(e){let t,n,r,i,o,c;return{c(){t=h("input"),r=O(),i=h("button"),i.textContent="Random",m(t,"class","id-input svelte-1kpgcbn"),m(t,"type","number"),m(t,"placeholder","123"),t.value=n=e[4]||"",m(i,"class","svelte-1kpgcbn")},m(l,f){E(l,t,f),E(l,r,f),E(l,i,f),o||(c=[F(t,"keypress",Ge),F(t,"change",e[14]),F(i,"click",e[5])],o=!0)},p(l,f){f&16&&n!==(n=l[4]||"")&&t.value!==n&&(t.value=n)},d(l){l&&T(t),l&&T(r),l&&T(i),o=!1,A(c)}}}function Xe(e){let t,n,r,i,o,c,l,f,u,b,p,k,x,d;function S(a,P){if(a[2]==="notloaded")return He;if(a[2]==="creating")return De;if(a[2]==="invalidid")return qe;if(a[2]==="unavailable")return Ye;if(a[2]==="noproject")return Ue;if(a[2]==="projectunavailable")return Ae;if(a[2]==="loading")return Fe;if(a[2]==="ok")return Oe}let C=S(e),_=C&&C(e);function N(a){e[9](a)}function U(a){e[10](a)}function W(a){e[11](a)}function g(a){e[12](a)}function j(a){e[13](a)}let w={serverUrl:J};e[4]!==void 0&&(w.id=e[4]),e[1]!==void 0&&(w.reduxStore=e[1]),e[0]!==void 0&&(w.projectTitle=e[0]),e[2]!==void 0&&(w.projectStatus=e[2]),e[3]!==void 0&&(w.playerMode=e[3]),o=new Ne({props:w}),I.push(()=>D(o,"id",N)),I.push(()=>D(o,"reduxStore",U)),I.push(()=>D(o,"projectTitle",W)),I.push(()=>D(o,"projectStatus",g)),I.push(()=>D(o,"playerMode",j));let y=!(e[2]==="loading"||e[2]==="creating")&&ae(e);return{c(){t=h("main"),n=h("div"),_&&_.c(),r=O(),i=h("div"),Re(o.$$.fragment),p=O(),y&&y.c(),k=O(),x=h("p"),x.textContent="Disclaimer: Scratch Community Edition is not associated with or made by the Scratch Team or any of its affiliates.",m(i,"class","player"),m(n,"class","anarchy-player"),m(x,"class","disclaimer svelte-1kpgcbn"),m(t,"class","svelte-1kpgcbn")},m(a,P){E(a,t,P),v(t,n),_&&_.m(n,null),v(n,r),v(n,i),me(o,i,null),v(n,p),y&&y.m(n,null),v(t,k),v(t,x),d=!0},p(a,[P]){C===(C=S(a))&&_?_.p(a,P):(_&&_.d(1),_=C&&C(a),_&&(_.c(),_.m(n,r)));const s={};!c&&P&16&&(c=!0,s.id=a[4],q(()=>c=!1)),!l&&P&2&&(l=!0,s.reduxStore=a[1],q(()=>l=!1)),!f&&P&1&&(f=!0,s.projectTitle=a[0],q(()=>f=!1)),!u&&P&4&&(u=!0,s.projectStatus=a[2],q(()=>u=!1)),!b&&P&8&&(b=!0,s.playerMode=a[3],q(()=>b=!1)),o.$set(s),a[2]==="loading"||a[2]==="creating"?y&&(y.d(1),y=null):y?y.p(a,P):(y=ae(a),y.c(),y.m(n,null))},i(a){d||(pe(o.$$.fragment,a),d=!0)},o(a){Le(o.$$.fragment,a),d=!1},d(a){a&&T(t),_&&_.d(),he(o),y&&y.d()}}}const J="https://5.187.229.143:443",Ge=e=>{const t=e.metaKey||e.key.length!==1||/[+e0-9-]/.test(e.key);return t||e.preventDefault(),t};function Je(e,t,n){let r,i,o,c,l=0;const f='{"targets":[{"isStage":true,"name":"Stage","variables":{},"lists":{},"broadcasts":{},"blocks":{},"comments":{},"currentCostume":0,"costumes":[{"assetId":"14e46ec3e2ba471c2adfe8f119052307","name":"","bitmapResolution":1,"md5ext":"14e46ec3e2ba471c2adfe8f119052307.svg","dataFormat":"svg","rotationCenterX":0,"rotationCenterY":0}],"sounds":[],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"Communicat","variables":{},"lists":{},"broadcasts":{},"blocks":{},"comments":{},"currentCostume":0,"costumes":[{"assetId":"b551df3ba49e6475928309214f51bd94","name":"Communicat-a","bitmapResolution":1,"md5ext":"b551df3ba49e6475928309214f51bd94.svg","dataFormat":"svg","rotationCenterX":48.20865451049096,"rotationCenterY":49.61842375318162},{"assetId":"b62c61a6c0384f71872990115d93eea8","name":"Communicat-b","bitmapResolution":1,"md5ext":"b62c61a6c0384f71872990115d93eea8.svg","dataFormat":"svg","rotationCenterX":46.1326061009419,"rotationCenterY":52.471372930065456},{"assetId":"814a2e4591c4eab9e832b88d16d3988d","name":"Communicat-c","bitmapResolution":1,"md5ext":"814a2e4591c4eab9e832b88d16d3988d.svg","dataFormat":"svg","rotationCenterX":55.23697676581517,"rotationCenterY":29.391930273437737},{"assetId":"78ed5bb0fefd8984546468e1a1ebb1b6","name":"Communicat-d","bitmapResolution":1,"md5ext":"78ed5bb0fefd8984546468e1a1ebb1b6.svg","dataFormat":"svg","rotationCenterX":48.44891835577772,"rotationCenterY":41.586213103483544}],"sounds":[{"assetId":"83c36d806dc92327b9e7049a565c6bff","name":"Meow","dataFormat":"wav","rate":48000,"sampleCount":40682,"md5ext":"83c36d806dc92327b9e7049a565c6bff.wav"}],"volume":100,"layerOrder":1,"visible":true,"x":0,"y":0,"size":100,"direction":90,"stretch":100,"draggable":false,"rotationStyle":"all around"}],"monitors":[],"extensions":[],"meta":{"semver":"3.0.0","vm":"0.2.0","agent":""}}';window.addEventListener("hashchange",u);async function u(){location.hash==="#create"?b():location.hash==="#random"?p():n(4,l=Number(location.hash.substring(1))||0)}u();async function b(){n(2,o="creating");const g=await fetch(`${J}/projects/`,{method:"POST",headers:{"Content-Type":"application/json"},body:f}),j=await g.text();if(!g.ok)throw n(2,o="unavailable"),j;let w=JSON.parse(j);return window.location.hash="#"+w["content-name"],w}async function p(){const g=await fetch(J+"/projects/count");if(!g.ok){n(2,o="unavailable");return}const j=await g.text();if(!Number(j)){n(2,o="unavailable");return}const w=Number(j),y=Math.floor(Math.random()*w)+1;window.location.hash="#"+y}const k=()=>{location.hash="#create"};function x(){r=this.value,n(0,r)}const d=()=>{n(3,c="editor")};function S(g){l=g,n(4,l)}function C(g){i=g,n(1,i)}function _(g){r=g,n(0,r)}function N(g){o=g,n(2,o)}function U(g){c=g,n(3,c)}return[r,i,o,c,l,p,k,x,d,S,C,_,N,U,g=>{const j=Number(g.target.value);!j&&j!==0||(window.location.hash="#"+j,n(4,l=j))}]}class We extends be{constructor(t){super(),ge(this,t,Je,Xe,ue,{})}}const le=document.getElementById("app");function Be(e,t={}){le.innerHTML="";let n=new e({target:le,...t});return console.info("mounted",e.name.substring(6,e.name.length-1)+";","options:",t),n}Be(We);
