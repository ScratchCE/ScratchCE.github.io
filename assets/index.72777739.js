const _e=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};_e();function L(){}function ce(e){return e()}function ie(){return Object.create(null)}function A(e){e.forEach(ce)}function ye(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let B;function ve(e,t){return B||(B=document.createElement("a")),B.href=t,e===B.href}function ke(e){return Object.keys(e).length===0}function v(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function H(){return V(" ")}function X(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Se(e){return Array.from(e.childNodes)}function se(e,t){e.value=t==null?"":t}function K(e,t,n){e.classList[n?"add":"remove"](t)}function je(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let G;function q(e){G=e}function fe(){if(!G)throw new Error("Function called outside component initialization");return G}function we(e){fe().$$.on_mount.push(e)}function Te(){const e=fe();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=je(t,n,{cancelable:r});return i.slice().forEach(l=>{l.call(e,o)}),!o.defaultPrevented}return!0}}const D=[],I=[],Z=[],ne=[],xe=Promise.resolve();let re=!1;function Ce(){re||(re=!0,xe.then(de))}function oe(e){Z.push(e)}function U(e){ne.push(e)}const te=new Set;let Q=0;function de(){const e=G;do{for(;Q<D.length;){const t=D[Q];Q++,q(t),Ee(t.$$)}for(q(null),D.length=0,Q=0;I.length;)I.pop()();for(let t=0;t<Z.length;t+=1){const n=Z[t];te.has(n)||(te.add(n),n())}Z.length=0}while(D.length);for(;ne.length;)ne.pop()();re=!1,te.clear(),q(e)}function Ee(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}const $=new Set;let Le;function pe(e,t){e&&e.i&&($.delete(e),e.i(t))}function Pe(e,t,n,r){if(e&&e.o){if($.has(e))return;$.add(e),Le.c.push(()=>{$.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function Y(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Re(e){e&&e.c()}function ge(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:l,after_update:u}=e.$$;i&&i.m(t,n),r||oe(()=>{const g=o.map(ce).filter(ye);l?l.push(...g):A(g),e.$$.on_mount=[]}),u.forEach(oe)}function he(e,t){const n=e.$$;n.fragment!==null&&(A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Me(e,t){e.$$.dirty[0]===-1&&(D.push(e),Ce(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,r,i,o,l,u=[-1]){const g=G;q(e);const c=e.$$={fragment:null,ctx:null,props:o,update:L,not_equal:i,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(g?g.$$.context:[])),callbacks:ie(),dirty:u,skip_bound:!1,root:t.target||g.$$.root};l&&l(c.root);let m=!1;if(c.ctx=n?n(e,t.props||{},(d,k,...j)=>{const f=j.length?j[0]:k;return c.ctx&&i(c.ctx[d],c.ctx[d]=f)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](f),m&&Me(e,d)),k}):[],c.update(),m=!0,A(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const d=Se(t.target);c.fragment&&c.fragment.l(d),d.forEach(C)}else c.fragment&&c.fragment.c();t.intro&&pe(e.$$.fragment),ge(e,t.target,t.anchor,t.customElement),de()}q(g)}class be{$destroy(){he(this,1),this.$destroy=L}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!ke(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ze(e){let t,n,r,i;return{c(){t=h("div"),n=h("div"),r=h("iframe"),p(r,"title",""),p(r,"scrolling","no"),p(r,"width","482"),p(r,"height","406"),ve(r.src,i="about:blank")||p(r,"src",i),p(r,"class","svelte-19fn9ge"),K(r,"fill-screen",["fullscreen","editor","fullscreen-editor"].includes(e[0])),p(n,"id","scratch-gui"),p(n,"class","svelte-19fn9ge"),K(n,"show",e[1]==="ok")},m(o,l){P(o,t,l),v(t,n),v(n,r),e[10](r)},p(o,[l]){l&1&&K(r,"fill-screen",["fullscreen","editor","fullscreen-editor"].includes(o[0])),l&2&&K(n,"show",o[1]==="ok")},i:L,o:L,d(o){o&&C(t),e[10](null)}}}function Ie(e,t,n){let{id:r=0}=t,{editor:i=!1}=t,{params:o={}}=t,{serverUrl:l}=t,{projectStatus:u="notloaded"}=t,{reduxTarget:g=null}=t,{reduxStore:c=null}=t,{playerMode:m="player"}=t,{projectTitle:d=""}=t,k=!1;if(!l)throw new Error("The server URL must be defined!");const j=Te();let f,S,w,b,F;we(async()=>{w=l,b=`${w}/projects`,F=`${w}/assets`,await M(),S=f.contentWindow,f.addEventListener("load",async()=>{const s=async function(){n(4,g=S.ReduxTarget),n(5,c=S.ReduxStore);const R=c,z=g;y(480,360);const x=R.getState().scratchGui;x.customStageSize&&x.customStageSize.width&&x.customStageSize.height&&y(x.customStageSize.width,x.customStageSize.height),x.mode&&O(x.mode),x.projectTitle&&n(3,d=x.projectTitle),z.addEventListener("statechanged",W=>{const N=W.detail.action;switch(j("reduxevent",W.detail),console.log(W.detail),N.type){case"tw/custom-stage-size/SET":console.log("gui frame:",f),y(N.width,N.height),j("stagesize",{width:N.width,action:f.height});break;case"scratch-gui/mode/SET_FULL_SCREEN":case"scratch-gui/mode/SET_PLAYER":O(W.detail.next.scratchGui.mode);break;case"projectTitle/SET_PROJECT_TITLE":k=!0,n(3,d=N.title);break}})};S.addEventListener("reduxtargetadded",s),S.ReduxTarget&&s()})});async function J(s){if(k){k=!1;return}!S||(await M(s),S.location.hash="#"+r)}function _(s){if(k){k=!1;return}!c||c.dispatch({type:"projectTitle/SET_PROJECT_TITLE",title:s})}function E(s){if(k){k=!1;return}!c||(c.dispatch({type:"scratch-gui/mode/SET_PLAYER",isPlayerOnly:s==="player"||s==="fullscreen"||s==="fullscreen-editor"}),c.dispatch({type:"scratch-gui/mode/SET_FULL_SCREEN",isFullScreen:s==="fullscreen"||s==="fullscreen-editor"}))}function O(s){k=!0,n(0,m=s?s.isPlayerOnly?s.isFullScreen?"fullscreen":"player":s.isFullScreen?"fullscreen-editor":"editor":"player")}async function M(s=r){if(n(1,u="loading"),s===0)return n(1,u="notloaded"),a(!1),!1;if(Number(s))try{return(await fetch(`${b}/${s}/exists`)).ok?(n(1,u="ok"),a(!0),S&&(S.location.hash="#"+s),!0):(n(1,u="noproject"),a(!1),!1)}catch{try{if((await fetch(`${w}`)).ok)return n(1,u="projectunavailable"),a(!1),!1}catch(z){return console.log(z),n(1,u="unavailable"),a(!1),!1}}else return a(!1),!1;return n(1,u="unavailable"),a(!1),!1}function y(s,R){f.setAttribute("width",Math.max(s+2,482)),f.setAttribute("height",R+2+44),j("framesize",{width:f.width,height:f.height})}function a(s){if(s){if(f.src==="about:blank"){const R=new URLSearchParams;R.set("project_host",b),R.set("asset_host",F);for(const x in o)R.set(x,o[x]);let z=R.toString();z=z===""?"":"?"+z,n(2,f.src="/gui/"+(i?"editor.html":"index.html")+z+"#"+r,f)}S&&(S.location.hash="#"+r)}else n(2,f.src="about:blank",f)}function T(s){I[s?"unshift":"push"](()=>{f=s,n(2,f)})}return e.$$set=s=>{"id"in s&&n(6,r=s.id),"editor"in s&&n(7,i=s.editor),"params"in s&&n(8,o=s.params),"serverUrl"in s&&n(9,l=s.serverUrl),"projectStatus"in s&&n(1,u=s.projectStatus),"reduxTarget"in s&&n(4,g=s.reduxTarget),"reduxStore"in s&&n(5,c=s.reduxStore),"playerMode"in s&&n(0,m=s.playerMode),"projectTitle"in s&&n(3,d=s.projectTitle)},e.$$.update=()=>{e.$$.dirty&1&&E(m),e.$$.dirty&8&&_(d),e.$$.dirty&64&&J(r)},[m,u,f,d,g,c,r,i,o,l,T]}class Oe extends be{constructor(t){super(),me(this,t,Ie,ze,ue,{id:6,editor:7,params:8,serverUrl:9,projectStatus:1,reduxTarget:4,reduxStore:5,playerMode:0,projectTitle:3})}}function Fe(e){let t,n,r,i,o,l,u,g,c;return{c(){t=h("div"),n=h("div"),r=h("button"),r.textContent="Create",i=H(),o=h("input"),l=H(),u=h("button"),u.textContent="See inside",p(r,"class","svelte-1kpgcbn"),p(o,"class","title-input svelte-1kpgcbn"),p(o,"type","text"),p(o,"placeholder","Project title here"),p(u,"class","svelte-1kpgcbn"),p(n,"class","controls svelte-1kpgcbn"),p(t,"class","controls-container svelte-1kpgcbn")},m(m,d){P(m,t,d),v(t,n),v(n,r),v(n,i),v(n,o),se(o,e[0]),v(n,l),v(n,u),g||(c=[X(r,"click",e[5]),X(o,"input",e[6]),X(u,"click",e[7])],g=!0)},p(m,d){d&1&&o.value!==m[0]&&se(o,m[0])},d(m){m&&C(t),g=!1,A(c)}}}function Ae(e){let t;return{c(){t=h("p"),t.textContent="Loading..."},m(n,r){P(n,t,r)},p:L,d(n){n&&C(t)}}}function Ne(e){let t;return{c(){t=h("p"),t.textContent="Somehow, we couldn't reach the project API but the servers work. What?"},m(n,r){P(n,t,r)},p:L,d(n){n&&C(t)}}}function Ue(e){let t;return{c(){t=h("p"),t.textContent="The project you tried to load doesn't exist."},m(n,r){P(n,t,r)},p:L,d(n){n&&C(t)}}}function Ye(e){let t,n,r,i,o;return{c(){t=h("p"),n=V("Couldn't reach servers. They are probably down or the browser is blocking the requests. Try visiting "),r=h("a"),i=V(ee),o=V(" in your browser and allowing the page to load."),p(r,"href",ee)},m(l,u){P(l,t,u),v(t,n),v(t,r),v(r,i),v(t,o)},p:L,d(l){l&&C(t)}}}function De(e){let t;return{c(){t=h("p"),t.textContent="Invalid project ID!"},m(n,r){P(n,t,r)},p:L,d(n){n&&C(t)}}}function He(e){let t;return{c(){t=h("p"),t.textContent="Creating project..."},m(n,r){P(n,t,r)},p:L,d(n){n&&C(t)}}}function Xe(e){let t;return{c(){t=h("p"),t.textContent="Load a project ID!"},m(n,r){P(n,t,r)},p:L,d(n){n&&C(t)}}}function ae(e){let t,n,r,i;return{c(){t=h("input"),p(t,"class","id-input svelte-1kpgcbn"),p(t,"type","number"),p(t,"placeholder","123"),t.value=n=e[4]||""},m(o,l){P(o,t,l),r||(i=[X(t,"keypress",Ge),X(t,"change",e[13])],r=!0)},p(o,l){l&16&&n!==(n=o[4]||"")&&t.value!==n&&(t.value=n)},d(o){o&&C(t),r=!1,A(i)}}}function qe(e){let t,n,r,i,o,l,u,g,c,m,d,k,j,f;function S(a,T){if(a[2]==="notloaded")return Xe;if(a[2]==="creating")return He;if(a[2]==="invalidid")return De;if(a[2]==="unavailable")return Ye;if(a[2]==="noproject")return Ue;if(a[2]==="projectunavailable")return Ne;if(a[2]==="loading")return Ae;if(a[2]==="ok")return Fe}let w=S(e),b=w&&w(e);function F(a){e[8](a)}function J(a){e[9](a)}function _(a){e[10](a)}function E(a){e[11](a)}function O(a){e[12](a)}let M={serverUrl:ee};e[4]!==void 0&&(M.id=e[4]),e[1]!==void 0&&(M.reduxStore=e[1]),e[0]!==void 0&&(M.projectTitle=e[0]),e[2]!==void 0&&(M.projectStatus=e[2]),e[3]!==void 0&&(M.playerMode=e[3]),o=new Oe({props:M}),I.push(()=>Y(o,"id",F)),I.push(()=>Y(o,"reduxStore",J)),I.push(()=>Y(o,"projectTitle",_)),I.push(()=>Y(o,"projectStatus",E)),I.push(()=>Y(o,"playerMode",O));let y=!(e[2]==="loading"||e[2]==="creating")&&ae(e);return{c(){t=h("main"),n=h("div"),b&&b.c(),r=H(),i=h("div"),Re(o.$$.fragment),d=H(),y&&y.c(),k=H(),j=h("p"),j.textContent="Disclaimer: Scratch Community Edition is not associated with or made by the Scratch Team or any of its affiliates.",p(i,"class","player"),p(n,"class","anarchy-player"),p(j,"class","disclaimer svelte-1kpgcbn"),p(t,"class","svelte-1kpgcbn")},m(a,T){P(a,t,T),v(t,n),b&&b.m(n,null),v(n,r),v(n,i),ge(o,i,null),v(n,d),y&&y.m(n,null),v(t,k),v(t,j),f=!0},p(a,[T]){w===(w=S(a))&&b?b.p(a,T):(b&&b.d(1),b=w&&w(a),b&&(b.c(),b.m(n,r)));const s={};!l&&T&16&&(l=!0,s.id=a[4],U(()=>l=!1)),!u&&T&2&&(u=!0,s.reduxStore=a[1],U(()=>u=!1)),!g&&T&1&&(g=!0,s.projectTitle=a[0],U(()=>g=!1)),!c&&T&4&&(c=!0,s.projectStatus=a[2],U(()=>c=!1)),!m&&T&8&&(m=!0,s.playerMode=a[3],U(()=>m=!1)),o.$set(s),a[2]==="loading"||a[2]==="creating"?y&&(y.d(1),y=null):y?y.p(a,T):(y=ae(a),y.c(),y.m(n,null))},i(a){f||(pe(o.$$.fragment,a),f=!0)},o(a){Pe(o.$$.fragment,a),f=!1},d(a){a&&C(t),b&&b.d(),he(o),y&&y.d()}}}const ee="https://5.187.229.143:443",Ge=e=>{const t=e.metaKey||e.key.length!==1||/[+e0-9-]/.test(e.key);return t||e.preventDefault(),t};function Je(e,t,n){let r,i,o,l,u=0;const g='{"targets":[{"isStage":true,"name":"Stage","variables":{},"lists":{},"broadcasts":{},"blocks":{},"comments":{},"currentCostume":0,"costumes":[{"assetId":"14e46ec3e2ba471c2adfe8f119052307","name":"","bitmapResolution":1,"md5ext":"14e46ec3e2ba471c2adfe8f119052307.svg","dataFormat":"svg","rotationCenterX":0,"rotationCenterY":0}],"sounds":[],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"Communicat","variables":{},"lists":{},"broadcasts":{},"blocks":{},"comments":{},"currentCostume":0,"costumes":[{"assetId":"b551df3ba49e6475928309214f51bd94","name":"Communicat-a","bitmapResolution":1,"md5ext":"b551df3ba49e6475928309214f51bd94.svg","dataFormat":"svg","rotationCenterX":48.20865451049096,"rotationCenterY":49.61842375318162},{"assetId":"b62c61a6c0384f71872990115d93eea8","name":"Communicat-b","bitmapResolution":1,"md5ext":"b62c61a6c0384f71872990115d93eea8.svg","dataFormat":"svg","rotationCenterX":46.1326061009419,"rotationCenterY":52.471372930065456},{"assetId":"814a2e4591c4eab9e832b88d16d3988d","name":"Communicat-c","bitmapResolution":1,"md5ext":"814a2e4591c4eab9e832b88d16d3988d.svg","dataFormat":"svg","rotationCenterX":55.23697676581517,"rotationCenterY":29.391930273437737},{"assetId":"78ed5bb0fefd8984546468e1a1ebb1b6","name":"Communicat-d","bitmapResolution":1,"md5ext":"78ed5bb0fefd8984546468e1a1ebb1b6.svg","dataFormat":"svg","rotationCenterX":48.44891835577772,"rotationCenterY":41.586213103483544}],"sounds":[{"assetId":"83c36d806dc92327b9e7049a565c6bff","name":"Meow","dataFormat":"wav","rate":48000,"sampleCount":40682,"md5ext":"83c36d806dc92327b9e7049a565c6bff.wav"}],"volume":100,"layerOrder":1,"visible":true,"x":0,"y":0,"size":100,"direction":90,"stretch":100,"draggable":false,"rotationStyle":"all around"}],"monitors":[],"extensions":[],"meta":{"semver":"3.0.0","vm":"0.2.0","agent":""}}';window.addEventListener("hashchange",c);async function c(){location.hash==="#create"?m():n(4,u=Number(location.hash.substring(1))||0)}c();async function m(){n(2,o="creating");const _=await fetch(`${ee}/projects/`,{method:"POST",headers:{"Content-Type":"application/json"},body:g}),E=await _.text();if(!_.ok)throw n(2,o="unavailable"),E;let O=JSON.parse(E);return window.location.hash="#"+O["content-name"],O}const d=()=>{location.hash="#create"};function k(){r=this.value,n(0,r)}const j=()=>{n(3,l="editor")};function f(_){u=_,n(4,u)}function S(_){i=_,n(1,i)}function w(_){r=_,n(0,r)}function b(_){o=_,n(2,o)}function F(_){l=_,n(3,l)}return[r,i,o,l,u,d,k,j,f,S,w,b,F,_=>{const E=Number(_.target.value);!E&&E!==0||(window.location.hash="#"+E,n(4,u=E))}]}class We extends be{constructor(t){super(),me(this,t,Je,qe,ue,{})}}const le=document.getElementById("app");function Be(e,t={}){le.innerHTML="";let n=new e({target:le,...t});return console.info("mounted",e.name.substring(6,e.name.length-1)+";","options:",t),n}Be(We);
